# 📺 直播助理 (LiveManage)

一个基于 **PyQt6** 的多功能直播辅助工具，支持 **弹幕接收与自动回复**、**语音播报 (TTS)**、**摄像头/屏幕/窗口捕获**、**虚拟摄像头输出**、**模板管理** 等功能。

适用于 **抖音 / 快手 / 哔站** 等平台的直播互动场景。

---

## ✨ 功能特性

### 🎥 视频与摄像头

* **多视频源支持**：
  * **物理摄像头** - 支持多种分辨率和帧率
  * **屏幕捕获** - 支持区域选择、是否包含光标
  * **窗口捕获** - 指定应用窗口捕获
  * **视频文件播放** - 支持本地视频循环播放
  * **自定义模板** - 图片、视频背景 + 音乐组合

* **高级功能**：
  * 输出到虚拟摄像头（需安装 `pyvirtualcam`）
  * 多种防检测功能：随机噪声、亮度变化、对焦模拟、伪影模拟、随机缩放
  * 分辨率可选（640x480、720x1280、1280x720、1920x1080）
  * 帧率设置（10 / 20 / 30 FPS）

---

### 💬 弹幕系统

* **平台支持**：
  * 抖音直播
  * 快手直播
  * 哔哩哔哩（预留接口，暂未支持）

* **智能回复**：
  * 根据关键词触发自定义回复
  * 数据库存储关键词与回复内容
  * 实时日志显示弹幕与回复记录

---

### 🔊 语音播报 (TTS)

* **核心引擎**：
  * 集成 **TTS语音** 模型
  * 支持关键词回复、自动解说、弹幕事件播报

* **播报场景**：
  * 用户进入直播间
  * 点赞、送礼、关注、分享事件
  * 关键词触发回复
  * 冷场自动解说

* **个性化设置**：
  * 可选择提示音（Prompt）文件进行风格化合成
  * 语音播报可开启/关闭
  * 支持语音播报状态实时同步

---

### 🎨 模板系统

* **模板类型**：
  * 图片模板（自动缩放显示）
  * 视频模板（显示首帧预览）

* **背景音乐**：
  * 模板可绑定背景音乐
  * 支持音乐试听功能

* **管理功能**：
  * 添加模板（图片/视频）
  * 删除模板
  * 预览原图/视频
  * 模板在摄像头预览中作为背景叠加使用

---

### 🔐 激活系统

* **安全验证**：
  * 每个设备绑定唯一 **设备ID**
  * 支持联网验证激活状态

* **权限管理**：
  * 激活到期提醒
  * 功能受限时仅可进入"系统"页面
  * 界面上实时显示剩余天数、到期时间

* **技术支持**：
  * 管理员联系方式：微信 **alonghack**

---

## 📦 安装与依赖

### 环境要求

* **操作系统**：推荐 Windows 10/11
* **Python版本**：Python 3.10+
* **外部依赖**：
  * OBS Studio（虚拟摄像头支持）

### 安装步骤

#### 1. 克隆项目

```bash
git clone https://github.com/your-repo/LiveManage.git
cd livestream-tool
```

#### 2. 安装依赖

```bash
pip install -r requirements.txt
```

#### 主要依赖包

* `PyQt6` - 图形界面开发
* `opencv-python` - 视频图像处理
* `pyvirtualcam` - 虚拟摄像头输出
* `pywin32` - Windows 窗口管理
* `screeninfo` - 屏幕信息获取
* `python-vlc` - 视频播放支持
* `loguru` - 日志系统

---

## 🚀 使用方法

### 启动应用

```bash
python main.py
```

### 功能页面详解

#### 1. 主控制台
* 摄像头实时预览
* 自动回复设置
* 模板/音乐背景管理
* 直播模式切换

#### 2. 关键词管理
* 自定义关键词与回复内容
* 关键词分类管理
* 回复策略设置

#### 3. 游戏解说
* 冷场自动播放解说
* 解说内容库管理
* 事件触发解说设置

#### 4. 语音设置
* TTS模型选择与配置
* 语音参数调节（音量、语速、音调）
* 语音测试功能

#### 5. 摄像头控制
* 高级视频源配置
* 防检测功能设置
* 虚拟摄像头输出配置

#### 6. 模板管理
* 模板添加/删除
* 模板预览功能
* 背景音乐绑定

#### 7. 系统设置
* 激活状态管理
* 设备信息显示
* 系统日志查看

---

## ⚠️ 注意事项

### 功能限制
* **虚拟摄像头功能** 需要安装 `pyvirtualcam`，并确保在 OBS 等软件中启用虚拟摄像头支持
* **哔哩哔哩** 平台暂未完全支持
* **激活码** 需联系管理员获取（微信：**alonghack**）

### 系统兼容性
* 推荐 Windows 系统运行（涉及 `pywin32` 与 DirectShow）
* 部分功能可能在其他操作系统上受限

### 使用建议
* 首次使用前请完成设备激活
* 建议在直播前测试所有功能
* 定期检查更新以获得最新功能

---

## 🔧 故障排除

### 常见问题

#### 1. 虚拟摄像头无法启动
* 检查 OBS Studio 是否正确安装
* 确认虚拟摄像头插件已启用
* 关闭其他可能占用摄像头的程序

#### 2. 视频播放异常
* 确认 VLC Media Player 已安装
* 检查视频文件路径是否正确
* 验证视频编解码器是否支持

#### 3. TTS语音无法播放
* 检查系统音频设置
* 确认语音库是否正确安装
* 验证音量设置是否合适

#### 4. 弹幕接收失败
* 检查网络连接状态
* 确认直播间地址正确
* 验证平台API接口状态

### 日志查看
程序运行过程中会在界面下方显示实时日志，可用于诊断问题。

---

## 📂 项目结构

```
.
├── main.py                    # 主程序入口
├── auxiliary/                 # 辅助模块目录
│   ├── activation_manager.py  # 激活管理系统
│   ├── models/                # 直播平台模型
│   │   ├── TikTok_ZH/         # 抖音弹幕处理
│   │   │   └── tiktok_chat.py # 抖音聊天处理核心
│   │   └── KuaiShou/          # 快手弹幕处理
│   │       └── kwai_chat.py   # 快手聊天处理核心
│   ├── screen_capture.py      # 屏幕/窗口捕获模块
│   ├── region_selector.py     # 区域选择工具
│   ├── sound_generation.py    # 语音合成模块
│   └── utils.py               # 工具函数模块
├── example/templates/         # 示例模板资源
│   ├── img/                   # 图片模板
│   ├── video/                 # 视频模板
│   └── music/                 # 背景音乐
├── requirements.txt           # 依赖包列表
└── README.md                  # 项目说明文档
```

### 核心模块说明

* **main.py** - 应用程序主入口，负责界面初始化和模块协调
* **activation_manager.py** - 设备激活验证和管理系统
* **tiktok_chat.py** - 抖音直播弹幕接收和处理核心
* **kwai_chat.py** - 快手直播弹幕接收和处理核心  
* **screen_capture.py** - 屏幕和窗口捕获功能实现
* **sound_generation.py** - 语音合成和播报功能

---

## 🛠️ 开发与扩展

### 代码规范
* 遵循 PEP 8 Python 代码规范
* 使用类型注解提高代码可读性
* 模块化设计，便于功能扩展

### 扩展接口
* 预留哔哩哔哩等平台接口
* 支持自定义TTS引擎接入
* 模板系统可扩展新类型

### 自定义开发
开发者可以根据需要扩展以下功能：
* 新增直播平台支持
* 自定义语音合成引擎
* 添加新的视频处理特效
* 扩展模板类型和效果

---

## 🔒 隐私与安全

### 数据保护
* 设备信息仅用于激活验证
* 不收集用户隐私数据
* 本地存储所有配置信息

### 使用授权
* 需合法授权使用软件
* 禁止用于违法违规直播内容
* 尊重平台规则和用户协议

---

## 📞 技术支持

### 问题反馈
* 微信联系：**alonghack**
* 提交 Issue 到项目仓库
* 查看项目文档和常见问题

### 更新日志
* 定期发布功能更新
* 修复已知问题和漏洞
* 优化性能和用户体验

---

## 👨‍💻 作者信息

* **开发者**：alonghack
* **联系方式**：微信 alonghack
* **项目维护**：持续更新和维护

---

## 📄 版权声明

本软件为专有软件，仅供授权用户使用。未经授权不得复制、分发或用于商业用途。

---

*最后更新日期：2025年10月*
